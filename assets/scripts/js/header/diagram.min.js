var diagram;!function(){function t(t,e,a){var i=this;i.defaults={viewBox:"270",box:$(t),data:[],kind:null,stroke:21,animate:!1,color:null,gradient:[],valClass:[],maxValue:null,padding:0},i.options=$.extend({},i.defaults,e),i.reset=a||!1,i.reset&&(i.options.animate=!1,i.resetDiagram()),i.rad=Math.PI/180,i.degree=i.options.maxValue/360,i.element=t.split("#")[1],i.buildDiagrams(),i.browser={},i.browser.edge=/edge/.test(navigator.userAgent.toLowerCase()),i.browser.ie=/msie/.test(navigator.userAgent.toLowerCase()),i.browser.ie11=/rv:11\.0/.test(navigator.userAgent.toLowerCase()),i.browser.ff=/firefox/.test(navigator.userAgent.toLowerCase()),i.browser.s517=/version\/5\.1\.7/.test(navigator.userAgent.toLowerCase()),!i.options.animate||i.browser.ie||i.browser.ie11||i.browser.edge||(i.animate=i.Animate())}t.prototype.resetDiagram=function(){this.options.box.find('.svg-wrap, div[class*="__value"]').remove()},t.prototype.buildDiagrams=function(){var t=this,e=[];"triple"==t.options.kind&&(e=t.tripleDiagram()),"ifinite"==t.options.kind&&(e=t.ifiniteDiagram()),"segment"==t.options.kind&&(e=t.segmentDiagram()),"dashed"==t.options.kind&&(e=t.dashedDiagram()),t.createSvg(e)},t.prototype.tripleDiagram=function(){var t,e,a,i=this,o=[],r=[],s=[];i.startAngle=180,i.direction=0;for(var n=0;n<4;n++){switch(n){case 0:t=i.options.viewBox/2-i.options.stroke/2,e=i.options.data[1]/i.degree,a=i.options.data[0]-i.options.data[1];break;case 1:t-=i.options.stroke,e=i.options.data[1]/i.degree,a=i.options.data[1];break;case 2:t=i.options.viewBox/2-i.options.stroke/2,e=i.options.data[0]/i.degree,a=i.options.data[0];break;case 3:t-=i.options.stroke/1.5,e=i.options.data[1]/i.degree}o[n]=i.calculatePath(e,t),r[n]=t,s[n]=a.toFixed(1).replace(".",",")}return{path:o,radius:r,val:s,preV:i.options.data[1].toFixed(0)}},t.prototype.ifiniteDiagram=function(){var t,e,a,i=this,o={Dots:[],Gradient:[],percValue:null,faktVal:null};return i.startAngle=-90,i.direction=1,o.radius=t=i.options.viewBox/2-i.options.stroke/2,e=i.options.data[0]/i.degree,e>360?(e-=360,i.infinite=!0):i.infinite=!1,o.Dots[0]=i.calculatePath(e,t),i.startAngle=-88,o.Dots[1]=i.calculatePath(e,t),i.infinite&&(i.startAngle=-90,o.Dots[2]=i.calculatePath(359,t),i.startAngle=-88,o.Dots[3]=i.calculatePath(359,t)),i.startAngle=0,e=180,i.calculatePath(e,t),o.Gradient[0]=i.drawGradient(i.options.gradient,0),i.startAngle=90,e=180,i.calculatePath(e,t),o.Gradient[1]=i.drawGradient(i.options.gradient,1),a=i.options.data[0]/i.options.maxValue*100,o.percVal=a.toFixed(1).replace(".",","),a=i.options.data[0]+"",o.faktVal=a.replace(".",","),o},t.prototype.segmentDiagram=function(){var t,e,a=this,i={Dots:[],Gradient:[]};a.direction=1,t=a.options.viewBox/2-a.options.stroke/2;for(var o=0;o<a.options.data.length;o++)o>0?(e=a.options.data[o]/a.degree,a.startAngle=a.startAngle+a.options.data[o-1]/a.degree):(e=a.options.data[0]/a.degree,a.startAngle=-90),i.Dots[o]=a.calculatePath(e,t-a.options.padding),i.Gradient[o]=a.drawGradient(a.options.gradient[o],o);return i},t.prototype.dashedDiagram=function(){var t,e,a=this,i={Dots:[],Gradient:[]};a.direction=1,a.startAngle=-90,t=a.options.viewBox/2-a.options.stroke/2;for(var o=0;o<2;o++)e=0==o?(a.options.data[o]-1)/a.degree:a.options.data[o]/a.degree,i.Dots[o]=a.calculatePath(e,t),i.Gradient[o]=a.drawGradient(a.options.gradient[o],o);return i},t.prototype.calculatePath=function(t,e){var a,i,o=this;return o.x0=Math.cos(o.startAngle*o.rad)*e+o.options.viewBox/2,o.y0=Math.sin(o.startAngle*o.rad)*e+o.options.viewBox/2,i=1==o.direction?o.startAngle+t:o.startAngle-t,o.x1=Math.cos(i*o.rad)*e+o.options.viewBox/2,o.y1=Math.sin(i*o.rad)*e+o.options.viewBox/2,a=t>180?1:0,["M",o.x0,o.y0,"A",e,e,0,a,o.direction,o.x1,o.y1].join(" ")},t.prototype.drawGradient=function(t,e){var a=this;return'<defs><linearGradient xmlns="http://www.w3.org/2000/svg" id="svg-gradient_'+a.element+"-"+e+'" gradientUnits="userSpaceOnUse" x1="'+a.x0+'" y1="'+a.y0+'" x2="'+a.x1+'" y2="'+a.y1+'"><stop offset="0" style="stop-color:'+t[0]+'"/><stop offset="1" style="stop-color:'+t[1]+'"/></linearGradient></defs>'},t.prototype.createSvg=function(t){var e,a,i=this,o="",r="";if(e='<div class="svg-wrap"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="'+i.options.viewBox+'px" height="'+i.options.viewBox+'px" viewBox="0 0 '+i.options.viewBox+" "+i.options.viewBox+'" xml:space="preserve" class="svg">',a="</svg></div>","triple"==i.options.kind&&(r='<div class="comp-diagram__values"><p id="value-path-'+i.element+'-2" class="comp-diagram__num comp-diagram__num_blue diagram-value" data-value="'+t.val[2]+'">'+t.val[2]+'</p><p id="value-path-'+i.element+'-1" class="comp-diagram__num comp-diagram__num_pink diagram-value" data-value="'+t.val[1]+'">'+t.val[1]+'</p><p id="value-path-'+i.element+'-0" class="comp-diagram__num comp-diagram__num_yellow diagram-value" data-pre-val="'+t.preV+'" data-value="'+t.val[0]+'">'+t.val[0]+"</p></div>",o+='<g><path id="path-'+i.element+'-0" fill="none" stroke="url(#svg-gradient_'+i.element+'-0)" stroke-width="'+i.options.stroke+'" stroke-linecap="round" stroke-miterlimit="10" d="'+t.path[0]+'" class="anim-diagram last" data-radius="'+t.radius[0]+'"/><rect x="0" y="0" width="100%" height="100%" fill="none" /></g>',o+='<g><path id="path-'+i.element+'-2" fill="none" stroke="url(#svg-gradient_'+i.element+'-2)" stroke-width="'+i.options.stroke+'" stroke-linecap="round" stroke-miterlimit="10" d="'+t.path[2]+'" class="anim-diagram" data-radius="'+t.radius[2]+'"/><rect x="0" y="0" width="100%" height="100%" fill="none" /></g>',/msie/.test(navigator.userAgent.toLowerCase())||(o+='<g filter="url(#f1)"><path fill="none" stroke="#000" stroke-opacity="0.5" stroke-width="'+(i.options.stroke-10)+'" stroke-linecap="round" stroke-miterlimit="10" d="'+t.path[3]+'" class="anim-diagram" data-radius="'+t.radius[3]+'" /><rect x="0" y="0" width="100%" height="100%" fill="none" /></g>'),o+='<g><path id="path-'+i.element+'-1" fill="none" stroke="url(#svg-gradient_'+i.element+'-1)" stroke-width="'+i.options.stroke+'" stroke-linecap="round" stroke-miterlimit="10" d="'+t.path[1]+'" class="anim-diagram" data-radius="'+t.radius[1]+'"/><rect x="0" y="0" width="100%" height="100%" fill="none" /></g>',o+='<filter id="f1"><feGaussianBlur stdDeviation="5"/></filter><defs><linearGradient xmlns="http://www.w3.org/2000/svg" id="svg-gradient_'+i.element+'-0" gradientUnits="userSpaceOnUse" x1="0" y1="134" x2="268" y2="154"><stop offset="0.4586" style="stop-color:#FEE300"/><stop offset="0.7107" style="stop-color:#30B069"/></defs><defs></linearGradient><linearGradient xmlns="http://www.w3.org/2000/svg" id="svg-gradient_'+i.element+'-1" gradientUnits="userSpaceOnUse" x1="224.0493" y1="185.9902" x2="54.2576" y2="87.9609"><stop offset="0.1748" style="stop-color:#9D308A"/><stop offset="1" style="stop-color:#FF695B"/></linearGradient></defs><defs><linearGradient id="svg-gradient_'+i.element+'-2" gradientUnits="userSpaceOnUse" x1="51.5933" y1="241.0088" x2="241.0492" y2="51.5528"><stop offset="0" style="stop-color:#00FFFF"></stop><stop offset="1" style="stop-color:#004CCF"></stop></linearGradient></defs>',i.options.box.append([r,e,o,a].join(""))),"ifinite"==i.options.kind&&(r='<div class="large-diagram__values"><div class="large-diagram__percent"><span id="value-perc-path-'+i.element+'-0" class="diagram-value" data-value="'+t.percVal+'">'+t.percVal+'</span>%</div><div class="large-diagram__value large-diagram__value_top">план<p class="'+i.options.valClass[0]+'">'+(i.options.maxValue+"").replace(".",",")+'</p></div><div class="large-diagram__value large-diagram__value_bottom"><p id="value-path-'+i.element+'-0" class="'+i.options.valClass[1]+' diagram-value" data-value="'+t.faktVal+'">'+t.faktVal+"</p>факт</div></div>",o+='<circle fill="none" cx="'+i.options.viewBox/2+'" cy="'+i.options.viewBox/2+'" r="'+t.radius+'" stroke="url(#svg-gradient_'+i.element+'-1)" stroke-width="'+i.options.stroke+'" stroke-opacity="0.3"/>',i.infinite&&(o+='<g filter="url(#filter-'+i.element+'-0)"><path fill="none" stroke="#000" stroke-opacity="0.5" stroke-width="'+(i.options.stroke-2)+'" stroke-linecap="round" d="'+t.Dots[3]+' " class="anim-diagram anim-diagram_first" data-radius="'+t.radius+'"/><rect x="0" y="0" width="100%" height="100%" fill="none" /></g>',o+='<path fill="none" stroke="url(#svg-gradient_'+i.element+'-1)" stroke-width="'+i.options.stroke+'" stroke-linecap="round" d="'+t.Dots[2]+' " class="anim-diagram anim-diagram_first" data-radius="'+t.radius+'" />'),o+='<g filter="url(#filter-'+i.element+'-0)"><path fill="none" stroke="#000" stroke-opacity="0.5" stroke-width="'+(i.options.stroke-2)+'" stroke-linecap="round" d="'+t.Dots[1]+' " class="anim-diagram anim-diagram_second" data-radius="'+t.radius+'"/><rect x="0" y="0" width="100%" height="100%" fill="none" /></g>',o+='<g><path id="path-'+i.element+'-0" fill="none" stroke="url(#svg-gradient_'+i.element+'-0)" stroke-width="'+i.options.stroke+'" stroke-linecap="round" d="'+t.Dots[0]+' " class="anim-diagram anim-diagram_second anim-diagram_id" data-radius="'+t.radius+'" /><rect x="0" y="0" width="100%" height="100%" fill="none" /></g>',o+='<filter id="filter-'+i.element+'-0"><feGaussianBlur stdDeviation="2"/></filter>',i.options.box.append([r,e,o,t.Gradient[0],t.Gradient[1],a].join(""))),"segment"==i.options.kind){for(var s=0;s<t.Dots.length;s++)o+='<path id="'+i.element+"-"+s+'" fill="none" stroke="url(#svg-gradient_'+i.element+"-"+s+')" stroke-width="'+i.options.stroke+'" d="'+t.Dots[s]+' " class="segment-diagram__sector anim-diagram" />'+t.Gradient[s];i.options.box.append([e,o,a].join(""))}if("dashed"==i.options.kind){for(var s=0;s<t.Dots.length;s++)o+='<path id="'+i.element+"-"+s+'" fill="none" stroke="url(#svg-gradient_'+i.element+"-"+s+')" stroke-width="'+i.options.stroke+'" d="'+t.Dots[s]+' " stroke-dasharray="2,5"/>'+t.Gradient[s];i.options.box.append([e,o,a].join(""))}},t.prototype.Animate=function(){function t(t){if(a.infinite){var e,i,o,r,s,n,d,l=[],p=[],g=[],m=[],f=[],u=[],c=[];void 0===t?(s=$("#"+a.element+" .anim-diagram_first"),n=$("#"+a.element+" .anim-diagram_second"),d=$("#"+a.element+" .anim-diagram_id").attr("id")):(s=$(".slider_diagrams "+t+" #"+a.element+" .anim-diagram_first"),n=$(".slider_diagrams "+t+" #"+a.element+" .anim-diagram_second"),d=$(".slider_diagrams "+t+" #"+a.element+" .anim-diagram_id").attr("id")),e=Math.PI*n.attr("data-radius")/180,__.browser.ff?e*=15:e*=3,i=+s.attr("stroke-dashoffset"),i=+i.toFixed(0),o=+n.attr("stroke-dashoffset"),o=+o.toFixed(0),r=i+o,l[0]=$("#value-"+d),l[1]=$("#value-perc-"+d);for(var v=0;v<l.length;v++)p[v]=0,g[v]=!1,l[v].length>0?(m[v]=l[v],f[v]=m[v].attr("data-value"),u[v]=+f[v].split(",")[0],g[v]=!0,c[v]=u[v]/(r/e),c[v]=Math.round(c[v])):g[v]=!1;setTimeout(function t(){if(r>0){setTimeout(t,1),r-=e,i>0?(s.attr("stroke-dashoffset",i),i-=e):(s.attr("stroke-dashoffset",0),n.attr("stroke-dashoffset",o),o-=e);for(var a=0;a<g.length;a++)g[a]&&(m[a].html(p[a]),p[a]=p[a]+c[a])}else{n.attr("stroke-dashoffset",0);for(var a=0;a<g.length;a++)g[a]&&m[a].html(f[a])}},500)}else{var h;h=void 0===t?$("#"+a.element+" .anim-diagram"):$(".slider_diagrams "+t+" #"+a.element+" .anim-diagram"),h.each(function(){var t=$(this),e=null,a=!1,i=null,o=[],r=[],s=[],n=[],d=[],l=[],p=[],g=[],m=[],f=[],u=500;i=Math.PI*t.attr("data-radius")/180,__.browser.ff?i*=15:i*=3,e=+t.attr("stroke-dashoffset"),e=e.toFixed(0),r[0]=$("#value-"+t.attr("id")),r[1]=$("#value-perc-"+t.attr("id"));for(var c=0;c<r.length;c++)o[c]=f[c]=0,s[c]=!1,r[c].length>0?(d[c]=r[c],l[c]=d[c].attr("data-value"),p[c]=+l[c].split(",")[0],s[c]=!0,g[c]=p[c]/(e/i),g[c]=Math.round(g[c]),t.hasClass("last")&&(u=1000,m[c]=+d[c].attr("data-pre-val"),g[c]=m[c]/(e/i),g[c]=Math.round(g[c]),n[c]=m[c]+p[c],a=!0)):s[c]=!1;setTimeout(function r(){if(e>0){setTimeout(r,1),t.attr("stroke-dashoffset",e),e-=i;for(var p=0;p<s.length;p++)s[p]&&(a?o[p]>n[p]&&(d[p].html(f[p]),f[p]=f[p]-g[p]):d[p].html(o[p]),o[p]=o[p]+g[p])}else{t.attr("stroke-dashoffset",0);for(var p=0;p<s.length;p++)s[p]&&d[p].html(l[p])}},u)})}}var e,a=__=this;return a.options.box.find(".anim-diagram").each(function(){e=Math.ceil($(this).get(0).getTotalLength()),$(this).attr({"stroke-dasharray":e+","+e,"stroke-dashoffset":e})}),a.options.box.find(".comp-diagram__values .diagram-value").html(""),a.options.box.find(".large-diagram__values .diagram-value").html(0),$(".sections").on("afterChange",function(e,a){"sections"==a.options.sliderId&&t('div[data-slick-index="0"]')}),$(".slider_diagrams").on("afterChange",function(){t(".slick-current")}),t};var e=[];diagram=function(a,i){return e[a]instanceof t?(e[a]=new t(a,i,!0),console.log(e[a])):e[a]=new t(a,i),e[a]}}(),$(document).ready(function(){$(document).on("mouseover",".segment-diagram__sector",function(t){var e=$(this).parent().parent().offset().top,a=$(this).parent().parent().offset().left,i=t.pageX,o=t.pageY;$(".diagram-tabs__span-js").fadeOut(321),$("#button_"+$(this).attr("id")).find(".diagram-tabs__span-js").fadeIn(321),$("#floating_"+$(this).attr("id")).css({top:o-e+25,left:i-a+7}).fadeIn(321)}),$(document).on("mousemove",".segment-diagram__sector",function(t){var e=$(this).parent().parent().offset().top,a=$(this).parent().parent().offset().left,i=t.pageX,o=t.pageY;$("#floating_"+$(this).attr("id")).css({top:o-e+25,left:i-a+7})}),$(document).on("mouseleave",".segment-diagram__sector",function(){$(".diagram-tabs__span-js, .segment-diagram__floating").fadeOut(321)}),$(".diagram-tabs__btn").hover(function(){var t=$(this).attr("id").split("_")[1];$("#"+t).addClass("segment-diagram__sector_hover")},function(){$(".segment-diagram__sector").removeClass("segment-diagram__sector_hover")}),$(".diagram-tabs__btn").click(function(){return!1})});