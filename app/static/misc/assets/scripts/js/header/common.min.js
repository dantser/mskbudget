//$(document).ready(function(){var e=$(window).width();$(window).height();$(".header__open-menu").click(function(){var e=$(this);return e.hasClass("is-active")?($(".header__drop").fadeOut(321),e.removeClass("is-active"),$(".header").removeClass("header_opened"),$(".sections, .guide").removeClass("filter_blur")):($(".header__drop").fadeIn(321),e.addClass("is-active"),$(".header").addClass("header_opened"),$(".sections, .guide").addClass("filter_blur")),!1}),e>700&&!$(".sections").hasClass("sections_fs")&&$(window).scroll(function(){var e=$(this).scrollTop();e>21?$(".header").addClass("header_short"):$(".header").removeClass("header_short")}),$(".news__thumb, .news__title").hover(function(){$(this).parent().find(".news__thumb, .news__title").addClass("hover")},function(){$(this).parent().find(".news__thumb, .news__title").removeClass("hover")}),$(".button-top").length&&(setTimeout(function(){var e=$(".footer").offset().top-321,t=0;$(window).scroll(function(){t=$(this).scrollTop(),t>e?$(".button-top").fadeIn(721,function(){$(".button-top").addClass("button-top_active")}):$(".button-top").fadeOut(721,function(){$(".button-top").removeClass("button-top_active")})})},1321),$(".button-top").click(function(){return $("html, body").animate({scrollTop:0},821),!1})),initOverLabels()});

$(document).ready(function() {
  $('.wrapper_main').on('wheel DOMMouseScroll mousewheel touchmove', function () {
      //$("#ui-datepicker-div").hide();
      $('.ui-datepicker').fadeOut(250);
      $('.jq-datepicker, .jq-spec-datepicker').blur().removeClass('hasDatepicker');
  });

  $('.main._basic').on('click', function() {
    if($(".range-datepicker__item").length>0) {
      $(".ui-datepicker-div").hide();
    }
  })

  $("#whitescreen").fadeOut(521);
    var e = $(window).width();
    $(window).height();
    $(".news__thumb, .news__title").hover(function() {
        $(this).parent().find(".news__thumb, .news__title").addClass("hover")
    }, function() {
        $(this).parent().find(".news__thumb, .news__title").removeClass("hover")
    }), $(".button-top").length && (setTimeout(function() {
        var e = $(".footer").offset().top - 321,
            t = 0;
        $(window).scroll(function() {
            t = $(this).scrollTop(), t > e ? $(".button-top").fadeIn(721, function() {
                $(".button-top").addClass("button-top_active")
            }) : $(".button-top").fadeOut(721, function() {
                $(".button-top").removeClass("button-top_active")
            })
        })
    }, 1321), $(".button-top").click(function() {
        return $("html, body").animate({
            scrollTop: 0
        }, 821), !1
    })), initOverLabels()
});

function freezePage() {
  const { $ } = window;
  const h = $('html');

  if (h.css('position') !== 'fixed') {
    const top = h.scrollTop() ? h.scrollTop() : $('body').scrollTop();

    if (window.innerWidth > h.width()) {
      h.css('overflow-y', 'scroll');
    }

    h.css({ width: '100%', height: '100%', position: 'fixed', top: -top });
  }
}

// Отключаем фиксацию страницы
function unfreezePage() {
  const { $ } = window;
  const h = $('html');

  if (h.css('position') === 'fixed') {
    h.css('position', 'static');
    $('html, body').scrollTop(-parseInt(h.css('top'), 10));
    h.css({ position: '', width: '', height: '', top: '', 'overflow-y': '' });
  }
}

// Запуск прелоадера
function preloaderOn() {
  var preloader = '<div class="preloader"><img class="preloader__image" src="assets/images/preloader.gif"></div>',
      container = $('body');

  container.append(preloader);

  setTimeout(function(){
    freezePage();
    container.find('.preloader').fadeIn('321');
  }, 1);
}

// Отключение прелоадера
function preloaderOff() {
  var preloader = '<div class="preloader"><img src="assets/images/preloader.gif"></div>',
      container = $('body');

  unfreezePage();
  container.find('.preloader').fadeOut('321');

  setTimeout(function(){
    container.find('.preloader').remove();
  }, 322);
}



// $(document).ready(function() {

//   var winW = $(window).width(),
//   winH = $(window).height();

//   $('.menu__sub-menu').each(function() {
//     var offset = $(this).parent().offset().left;
//     $(this).css({width: winW, marginLeft: -offset});
//     $(this).find('.menu__sub-menu-ul').width($('.menu').width());
//   });


//   if (winW > 800) {

//     $('.menu__item').on('mouseenter click', function() {
//       $('.menu__sub-menu').hide();
//       if( $(this).find('.menu__sub-menu').length > 0 ){
//         //var offsetY = $(this).closest('.menu').position().top;
//         var offsetY = $('.header').outerHeight();
//         var heightM = $(this).find('.menu__sub-menu').innerHeight();
//         //$('.header').css('height', offsetY+heightM+30);
//         $(this).find('.menu__sub-menu').show();
//         $(this).find('.menu__sub-menu').css('top', offsetY+'px');

//       }
//     });

//     $('.menu__sub-menu').on('mouseleave click', function() {
//       $('.menu__sub-menu').hide();
//     });

//     $(document.body).on('click', function(e) {
//       if ($(e.target).closest(".menu__sub-menu").length) return;
//       $('.menu__sub-menu').hide();
//     });
//   }

//   $(window).on('resize', function() {

//     var winWr = $(window).width(),
//     winHr = $(window).height();

//     $('.menu__sub-menu').hide();
//     $('.menu__sub-menu').each(function() {
//       var offsetr = $(this).parent().offset().left;
//       $(this).css({width: winWr, marginLeft: -offsetr});
//       $(this).find('.menu__sub-menu-ul').width($('.menu').width());
//     });
//   });
// });
