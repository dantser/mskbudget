
$(document).ready(function() {
    $(".open-popup").click(function() {
        var p = $(this).attr("href");
        return $(".popup-window").fadeOut(321), $("#popup-wrapper").fadeIn(321), $(p).fadeIn(321), !1
    }), $(".close-popup, #mask").click(function(e) {
        return $(".popup-window, #popup-wrapper").fadeOut(321), !1
    });


    $('.login-form').submit(function(e) {

        var fio = /([А-ЯЁ][а-яё]+[\-\s]?){3,}/.test($(this).find('input[type=text]').val());
        var email = /^.+@.+\..+$/igm.test($(this).find('input[type=email]').val());
        var password = /(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$/.test($(this).find('input[type=password]').val());

        // Форма входа
        if (!$(this).find('input[type=text]'))
            fio = true;
        // Форма сброса пароля
        if (!$(this).find('input[type=password]'))
            password = true;

        $(this).find('input[required]').each(function(index, element){
            var type = element.getAttribute('type');

            if (    (type == 'text' && !fio) || 
                    (type == 'email' && !email) || 
                    (type == 'password' && !password) ) {

                    $(this).after("<div class='error'><i></i><span>Поле заполнено неверно!</span></div>");
            }
        });

        if ( $(this).find('.error').length > 0 ) {
            $(this).find('.error:eq(0)').fadeIn(321);
            return false;
        }

        return;
    });

    $('.login-form__field').on('keypress', function() {
        $('.error').remove();
    });
  })
